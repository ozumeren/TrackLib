// prisma/schema.prisma

model Customer {
  id                String   @id @default(cuid())
  name              String
  apiKey            String   @unique
  scriptId          String   @unique  // YENİ: "pix_ronabet" gibi
  
  // Domain güvenliği için
  allowedDomains    String[] // ["ronabet.com", "www.ronabet.com"]
  
  telegramBotToken  String?
  metaPixelId       String?
  metaAccessToken   String?
  googleAdsId       String?
  googleApiSecret   String?
  domConfig         Json?
  
  users             User[]
  events            Event[]
  segments          Segment[]
  rules             Rule[]
  
  createdAt         DateTime @default(now())
  updatedAt         DateTime @updatedAt
  
  @@index([scriptId])
}

// Migration komutu:
// npx prisma migrate dev --name add_script_id
