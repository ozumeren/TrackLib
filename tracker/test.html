<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>🎰 Royal Casino - Odin v3 Tracker Test</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #8b5cf6;
            --primary-dark: #7c3aed;
            --secondary: #10b981;
            --danger: #ef4444;
            --warning: #f59e0b;
            --dark: #1f2937;
            --light: #f3f4f6;
            --text: #111827;
            --text-light: #6b7280;
            --border: #e5e7eb;
            --success: #10b981;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: var(--text);
            min-height: 100vh;
        }

        /* Header */
        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 1.5rem;
            font-weight: bold;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 1.5rem;
        }

        .balance {
            background: linear-gradient(135deg, var(--secondary), #059669);
            color: white;
            padding: 0.5rem 1.5rem;
            border-radius: 50px;
            font-weight: 600;
            font-size: 1.1rem;
            box-shadow: 0 4px 6px rgba(16, 185, 129, 0.3);
        }

        .user-id {
            color: var(--text-light);
            font-size: 0.9rem;
        }

        /* Container */
        .container {
            max-width: 1200px;
            margin: 2rem auto;
            padding: 0 2rem;
        }

        /* Welcome Section */
        .welcome-section {
            background: white;
            border-radius: 20px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }

        .welcome-section h1 {
            margin-bottom: 1rem;
            color: var(--primary);
        }

        .welcome-section p {
            color: var(--text-light);
            line-height: 1.6;
        }

        /* Login Form */
        .login-form {
            background: white;
            border-radius: 20px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: var(--text);
        }

        .form-group input {
            width: 100%;
            padding: 0.75rem 1rem;
            border: 2px solid var(--border);
            border-radius: 10px;
            font-size: 1rem;
            transition: all 0.3s;
        }

        .form-group input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(139, 92, 246, 0.1);
        }

        /* Buttons */
        .btn {
            padding: 0.75rem 2rem;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            box-shadow: 0 4px 6px rgba(139, 92, 246, 0.3);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(139, 92, 246, 0.4);
        }

        .btn-success {
            background: linear-gradient(135deg, var(--secondary), #059669);
            color: white;
            box-shadow: 0 4px 6px rgba(16, 185, 129, 0.3);
        }

        .btn-success:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(16, 185, 129, 0.4);
        }

        .btn-danger {
            background: linear-gradient(135deg, var(--danger), #dc2626);
            color: white;
            box-shadow: 0 4px 6px rgba(239, 68, 68, 0.3);
        }

        .btn-warning {
            background: linear-gradient(135deg, var(--warning), #d97706);
            color: white;
            box-shadow: 0 4px 6px rgba(245, 158, 11, 0.3);
        }

        /* Action Buttons */
        .action-buttons {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
            margin: 2rem 0;
        }

        .action-card {
            background: white;
            border-radius: 15px;
            padding: 1.5rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            transition: all 0.3s;
        }

        .action-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.15);
        }

        .action-card h3 {
            margin-bottom: 1rem;
            color: var(--primary);
        }

        .action-card .btn {
            width: 100%;
            justify-content: center;
        }

        /* Games Grid */
        .games-section {
            background: white;
            border-radius: 20px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }

        .games-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 1.5rem;
            margin-top: 1.5rem;
        }

        .game-card {
            background: linear-gradient(135deg, #f3f4f6, #e5e7eb);
            border-radius: 15px;
            padding: 2rem 1rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            border: 2px solid transparent;
        }

        .game-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.2);
            border-color: var(--primary);
        }

        .game-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
        }

        .game-title {
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: var(--text);
        }

        .game-provider {
            font-size: 0.875rem;
            color: var(--text-light);
        }

        /* Stats Section */
        .stats-section {
            background: white;
            border-radius: 20px;
            padding: 2rem;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            margin-top: 1.5rem;
        }

        .stat-card {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            padding: 1.5rem;
            border-radius: 15px;
            text-align: center;
        }

        .stat-card.success {
            background: linear-gradient(135deg, var(--secondary), #059669);
        }

        .stat-card.danger {
            background: linear-gradient(135deg, var(--danger), #dc2626);
        }

        .stat-card.warning {
            background: linear-gradient(135deg, var(--warning), #d97706);
        }

        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            margin-bottom: 0.5rem;
        }

        .stat-label {
            font-size: 0.875rem;
            opacity: 0.9;
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(5px);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: white;
            border-radius: 20px;
            padding: 2rem;
            max-width: 500px;
            width: 90%;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            animation: modalSlideIn 0.3s ease-out;
        }

        @keyframes modalSlideIn {
            from {
                transform: translateY(-50px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .modal-close {
            float: right;
            font-size: 2rem;
            font-weight: bold;
            color: var(--text-light);
            cursor: pointer;
            line-height: 1;
        }

        .modal-close:hover {
            color: var(--danger);
        }

        /* Notification */
        .notification {
            position: fixed;
            top: 100px;
            right: 20px;
            background: white;
            color: var(--text);
            padding: 1rem 2rem;
            border-radius: 10px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
            transform: translateX(400px);
            transition: transform 0.3s ease-out;
            z-index: 2000;
            max-width: 400px;
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification.success {
            border-left: 4px solid var(--success);
        }

        .notification.error {
            border-left: 4px solid var(--danger);
        }

        .notification.info {
            border-left: 4px solid var(--primary);
        }

        /* Hidden class */
        .hidden {
            display: none !important;
        }

        /* Debug Panel */
        .debug-panel {
            position: fixed;
            bottom: 20px;
            left: 20px;
            background: rgba(0, 0, 0, 0.9);
            color: #0f0;
            padding: 1rem;
            border-radius: 10px;
            font-family: 'Courier New', monospace;
            font-size: 0.75rem;
            max-width: 400px;
            max-height: 300px;
            overflow-y: auto;
            z-index: 1500;
        }

        .debug-panel h4 {
            color: #0ff;
            margin-bottom: 0.5rem;
        }

        .debug-panel pre {
            white-space: pre-wrap;
            word-wrap: break-word;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .container {
                padding: 0 1rem;
            }

            .action-buttons {
                grid-template-columns: 1fr;
            }

            .games-grid {
                grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            }

            .notification {
                right: 10px;
                max-width: calc(100% - 20px);
            }

            .debug-panel {
                left: 10px;
                right: 10px;
                max-width: calc(100% - 20px);
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <div class="logo">🎰 Royal Casino</div>
            <div class="user-info">
                <div class="balance" id="balance">Bakiye: ₺0.00</div>
                <div class="user-id" id="userIdDisplay">Giriş yapın</div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <div class="container">
        <!-- Welcome Section -->
        <div class="welcome-section">
            <h1>🎉 Odin v3 Tracker Test Casino</h1>
            <p>
                Bu test casino websitesi, Odin v3 Tracker'ınızı kapsamlı bir şekilde test etmek için tasarlanmıştır.
                Tüm önemli casino event'lerini (login, deposit, withdrawal, game events) simüle eder ve tracker'ın
                düzgün çalıştığını doğrulamanıza yardımcı olur.
            </p>
        </div>

        <!-- Login Form -->
        <div class="login-form" id="loginForm">
            <h2>🔐 Giriş Yap</h2>
            <p style="margin-bottom: 1.5rem; color: var(--text-light);">
                Tracker'ı test etmek için herhangi bir Player ID ve email girin.
            </p>
            <div class="form-group">
                <label for="playerIdInput">Oyuncu ID</label>
                <input type="text" id="playerIdInput" placeholder="Örn: player_12345" value="test_player_001">
            </div>
            <div class="form-group">
                <label for="emailInput">Email (Opsiyonel)</label>
                <input type="email" id="emailInput" placeholder="email@example.com" value="test@royal.casino">
            </div>
            <button class="btn btn-primary" onclick="handleLogin()">
                🚀 Giriş Yap & Tracker'ı Başlat
            </button>
        </div>

        <!-- Main Dashboard (Hidden until login) -->
        <div id="dashboard" class="hidden">
            <!-- Action Buttons -->
            <div class="action-buttons">
                <!-- Deposit -->
                <div class="action-card">
                    <h3>💰 Para Yatır</h3>
                    <div class="form-group">
                        <input type="number" id="depositAmount" placeholder="Miktar" value="100" min="10" step="10">
                    </div>
                    <button class="btn btn-success" onclick="handleDeposit()">
                        Para Yatır
                    </button>
                </div>

                <!-- Withdrawal -->
                <div class="action-card">
                    <h3>💸 Para Çek</h3>
                    <div class="form-group">
                        <input type="number" id="withdrawAmount" placeholder="Miktar" value="50" min="10" step="10">
                    </div>
                    <button class="btn btn-warning" onclick="handleWithdrawal()">
                        Para Çek
                    </button>
                </div>

                <!-- Logout -->
                <div class="action-card">
                    <h3>🚪 Çıkış</h3>
                    <p style="color: var(--text-light); margin-bottom: 1rem;">
                        Oturumu sonlandır ve tracker'a bildir
                    </p>
                    <button class="btn btn-danger" onclick="handleLogout()">
                        Çıkış Yap
                    </button>
                </div>
            </div>

            <!-- Games Section -->
            <div class="games-section">
                <h2>🎮 Oyunlar</h2>
                <div class="games-grid">
                    <div class="game-card" onclick="playGame('Sweet Bonanza', 'sweet_bonanza')">
                        <div class="game-icon">🍭</div>
                        <div class="game-title">Sweet Bonanza</div>
                        <div class="game-provider">Pragmatic Play</div>
                    </div>
                    <div class="game-card" onclick="playGame('Gates of Olympus', 'gates_olympus')">
                        <div class="game-icon">⚡</div>
                        <div class="game-title">Gates of Olympus</div>
                        <div class="game-provider">Pragmatic Play</div>
                    </div>
                    <div class="game-card" onclick="playGame('Book of Dead', 'book_dead')">
                        <div class="game-icon">📖</div>
                        <div class="game-title">Book of Dead</div>
                        <div class="game-provider">Play'n GO</div>
                    </div>
                    <div class="game-card" onclick="playGame('Starburst', 'starburst')">
                        <div class="game-icon">💎</div>
                        <div class="game-title">Starburst</div>
                        <div class="game-provider">NetEnt</div>
                    </div>
                    <div class="game-card" onclick="playGame('Gonzo Quest', 'gonzo_quest')">
                        <div class="game-icon">🗿</div>
                        <div class="game-title">Gonzo's Quest</div>
                        <div class="game-provider">NetEnt</div>
                    </div>
                    <div class="game-card" onclick="playGame('Big Bass Bonanza', 'big_bass')">
                        <div class="game-icon">🎣</div>
                        <div class="game-title">Big Bass Bonanza</div>
                        <div class="game-provider">Pragmatic Play</div>
                    </div>
                </div>
            </div>

            <!-- Stats Section -->
            <div class="stats-section">
                <h2>📊 İstatistikler</h2>
                <div class="stats-grid">
                    <div class="stat-card success">
                        <div class="stat-value" id="totalDeposit">₺0</div>
                        <div class="stat-label">Toplam Yatırım</div>
                    </div>
                    <div class="stat-card danger">
                        <div class="stat-value" id="totalWithdrawal">₺0</div>
                        <div class="stat-label">Toplam Çekim</div>
                    </div>
                    <div class="stat-card warning">
                        <div class="stat-value" id="gamesPlayed">0</div>
                        <div class="stat-label">Oynanan Oyun</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Game Modal -->
    <div class="modal" id="gameModal">
        <div class="modal-content">
            <span class="modal-close" onclick="closeGameModal()">&times;</span>
            <h2 id="gameTitle">Oyun</h2>
            <p style="margin: 1rem 0; color: var(--text-light);">
                Oyun simülasyonu çalışıyor. Bahis miktarını girin ve sonuç seçin.
            </p>
            <div class="form-group">
                <label for="betAmount">Bahis Miktarı</label>
                <input type="number" id="betAmount" value="10" min="1" step="5">
            </div>
            <div class="action-buttons">
                <button class="btn btn-success" onclick="simulateWin()">
                    🎉 Kazandım! (x2)
                </button>
                <button class="btn btn-danger" onclick="simulateLoss()">
                    😢 Kaybettim
                </button>
            </div>
            <button class="btn btn-primary" onclick="closeGameModal()" style="width: 100%; margin-top: 1rem;">
                Oyunu Bitir
            </button>
        </div>
    </div>

    <!-- Notification -->
    <div class="notification" id="notification"></div>

    <!-- Debug Panel -->
    <div class="debug-panel" id="debugPanel">
        <h4>🐛 Tracker Debug</h4>
        <pre id="debugContent">Tracker yükleniyor...</pre>
    </div>

    <!-- ========================================== -->
    <!-- ODIN V3 TRACKER SCRIPT -->
    <!-- ⚠️ KENDİ SCRIPT ID'NİZİ BURAYA YAZIN -->
    <!-- ========================================== -->
    <script src="http://37.27.72.40:3000/scripts/tracklib_test1.js"></script>

    <!-- Main Application Script -->
    <script>
        // ==========================================
        // GLOBAL STATE
        // ==========================================
        let currentBalance = 0;
        let totalDeposit = 0;
        let totalWithdrawal = 0;
        let gamesPlayed = 0;
        let currentGameId = null;
        let currentGameName = null;
        let gameStartTime = null;
        let isLoggedIn = false;

        // ==========================================
        // INITIALIZATION
        // ==========================================
        window.addEventListener('load', function() {
            updateDebug('Page loaded');
            
            // Check if tracker loaded
            setTimeout(() => {
                if (window.tracker || window.TrackLib) {
                    updateDebug('✅ Tracker loaded successfully!');
                    console.log('Tracker Status:', window.tracker?.getStatus?.());
                } else {
                    updateDebug('❌ Tracker not found! Check script URL.');
                }
            }, 1000);
        });

        // ==========================================
        // LOGIN HANDLER
        // ==========================================
        function handleLogin() {
            const playerId = document.getElementById('playerIdInput').value.trim();
            const email = document.getElementById('emailInput').value.trim();

            if (!playerId) {
                showNotification('❌ Lütfen bir Oyuncu ID girin!', 'error');
                return;
            }

            // Check if tracker is available
            if (!window.tracker && !window.TrackLib) {
                showNotification('❌ Tracker yüklenmedi! Script URL\'ini kontrol edin.', 'error');
                updateDebug('❌ Tracker not available on window object');
                return;
            }

            const tracker = window.tracker || window.TrackLib;

            // Identify user
            try {
                tracker.identify(playerId);
                updateDebug(`✅ User identified: ${playerId}`);
            } catch (error) {
                updateDebug(`❌ Identify error: ${error.message}`);
            }

            // Track login event
            try {
                tracker.track('login_successful', {
                    email: email || undefined,
                    timestamp: new Date().toISOString()
                });
                updateDebug(`✅ Login event sent`);
            } catch (error) {
                updateDebug(`❌ Track login error: ${error.message}`);
            }

            // Update UI
            isLoggedIn = true;
            document.getElementById('loginForm').classList.add('hidden');
            document.getElementById('dashboard').classList.remove('hidden');
            document.getElementById('userIdDisplay').textContent = `👤 ${playerId}`;
            
            showNotification(`✅ Giriş başarılı! Hoş geldin ${playerId}`, 'success');
        }

        // ==========================================
        // DEPOSIT HANDLER
        // ==========================================
        function handleDeposit() {
            if (!isLoggedIn) {
                showNotification('❌ Lütfen önce giriş yapın!', 'error');
                return;
            }

            const amount = parseFloat(document.getElementById('depositAmount').value);
            
            if (isNaN(amount) || amount <= 0) {
                showNotification('❌ Geçerli bir miktar girin!', 'error');
                return;
            }

            const tracker = window.tracker || window.TrackLib;

            // Track deposit
            try {
                tracker.deposit(amount, 'TRY', 'credit_card');
                updateDebug(`✅ Deposit tracked: ₺${amount}`);
            } catch (error) {
                updateDebug(`❌ Deposit error: ${error.message}`);
            }

            // Update balance
            currentBalance += amount;
            totalDeposit += amount;
            
            updateBalance();
            updateStats();
            
            showNotification(`✅ ₺${amount} başarıyla yatırıldı!`, 'success');
        }

        // ==========================================
        // WITHDRAWAL HANDLER
        // ==========================================
        function handleWithdrawal() {
            if (!isLoggedIn) {
                showNotification('❌ Lütfen önce giriş yapın!', 'error');
                return;
            }

            const amount = parseFloat(document.getElementById('withdrawAmount').value);
            
            if (isNaN(amount) || amount <= 0) {
                showNotification('❌ Geçerli bir miktar girin!', 'error');
                return;
            }

            if (amount > currentBalance) {
                showNotification('❌ Yetersiz bakiye!', 'error');
                return;
            }

            const tracker = window.tracker || window.TrackLib;

            // Track withdrawal
            try {
                tracker.withdrawal(amount, 'TRY', 'bank_transfer');
                updateDebug(`✅ Withdrawal tracked: ₺${amount}`);
            } catch (error) {
                updateDebug(`❌ Withdrawal error: ${error.message}`);
            }

            // Update balance
            currentBalance -= amount;
            totalWithdrawal += amount;
            
            updateBalance();
            updateStats();
            
            showNotification(`✅ ₺${amount} çekim talebi oluşturuldu!`, 'success');
        }

        // ==========================================
        // LOGOUT HANDLER
        // ==========================================
        function handleLogout() {
            if (!isLoggedIn) return;

            const tracker = window.tracker || window.TrackLib;

            // Track logout
            try {
                tracker.logout();
                updateDebug(`✅ Logout tracked`);
            } catch (error) {
                updateDebug(`❌ Logout error: ${error.message}`);
            }

            // Reset state
            isLoggedIn = false;
            currentBalance = 0;
            totalDeposit = 0;
            totalWithdrawal = 0;
            gamesPlayed = 0;

            // Update UI
            document.getElementById('dashboard').classList.add('hidden');
            document.getElementById('loginForm').classList.remove('hidden');
            document.getElementById('userIdDisplay').textContent = 'Giriş yapın';
            document.getElementById('playerIdInput').value = 'test_player_001';
            document.getElementById('emailInput').value = 'test@royal.casino';
            
            updateBalance();
            updateStats();
            
            showNotification('✅ Çıkış yapıldı!', 'info');
        }

        // ==========================================
        // GAME HANDLERS
        // ==========================================
        function playGame(gameName, gameId) {
            if (!isLoggedIn) {
                showNotification('❌ Lütfen önce giriş yapın!', 'error');
                return;
            }

            if (currentBalance < 10) {
                showNotification('❌ Yetersiz bakiye! Lütfen para yatırın.', 'error');
                return;
            }

            currentGameId = gameId;
            currentGameName = gameName;
            gameStartTime = Date.now();

            const tracker = window.tracker || window.TrackLib;

            // Track game start
            try {
                tracker.gameStart(gameName);
                updateDebug(`✅ Game started: ${gameName}`);
            } catch (error) {
                updateDebug(`❌ Game start error: ${error.message}`);
            }

            // Show game modal
            document.getElementById('gameTitle').textContent = `🎮 ${gameName}`;
            document.getElementById('gameModal').classList.add('active');
        }

        function simulateWin() {
            const betAmount = parseFloat(document.getElementById('betAmount').value);
            
            if (isNaN(betAmount) || betAmount <= 0) {
                showNotification('❌ Geçerli bir bahis miktarı girin!', 'error');
                return;
            }

            if (betAmount > currentBalance) {
                showNotification('❌ Yetersiz bakiye!', 'error');
                return;
            }

            const tracker = window.tracker || window.TrackLib;
            const winAmount = betAmount * 2;

            // Track bet
            try {
                tracker.bet(betAmount, 'TRY', currentGameName);
                updateDebug(`✅ Bet placed: ₺${betAmount}`);
            } catch (error) {
                updateDebug(`❌ Bet error: ${error.message}`);
            }

            // Track win
            try {
                tracker.win(winAmount, 'TRY', currentGameName);
                updateDebug(`✅ Win tracked: ₺${winAmount}`);
            } catch (error) {
                updateDebug(`❌ Win error: ${error.message}`);
            }

            // Update balance
            currentBalance = currentBalance - betAmount + winAmount;
            updateBalance();
            
            showNotification(`🎉 Kazandınız! +₺${winAmount}`, 'success');
        }

        function simulateLoss() {
            const betAmount = parseFloat(document.getElementById('betAmount').value);
            
            if (isNaN(betAmount) || betAmount <= 0) {
                showNotification('❌ Geçerli bir bahis miktarı girin!', 'error');
                return;
            }

            if (betAmount > currentBalance) {
                showNotification('❌ Yetersiz bakiye!', 'error');
                return;
            }

            const tracker = window.tracker || window.TrackLib;

            // Track bet
            try {
                tracker.bet(betAmount, 'TRY', currentGameName);
                updateDebug(`✅ Bet placed: ₺${betAmount}`);
            } catch (error) {
                updateDebug(`❌ Bet error: ${error.message}`);
            }

            // Update balance
            currentBalance -= betAmount;
            updateBalance();
            
            showNotification(`😢 Kaybettiniz! -₺${betAmount}`, 'error');
        }

        function closeGameModal() {
            if (!currentGameId) return;

            const tracker = window.tracker || window.TrackLib;
            const duration = Math.floor((Date.now() - gameStartTime) / 1000);

            // Track game end
            try {
                tracker.gameEnd(currentGameName, duration);
                updateDebug(`✅ Game ended: ${currentGameName} (${duration}s)`);
            } catch (error) {
                updateDebug(`❌ Game end error: ${error.message}`);
            }

            gamesPlayed++;
            updateStats();

            document.getElementById('gameModal').classList.remove('active');
            currentGameId = null;
            currentGameName = null;
            gameStartTime = null;
        }

        // ==========================================
        // UI UPDATES
        // ==========================================
        function updateBalance() {
            document.getElementById('balance').textContent = `Bakiye: ₺${currentBalance.toFixed(2)}`;
        }

        function updateStats() {
            document.getElementById('totalDeposit').textContent = `₺${totalDeposit.toFixed(2)}`;
            document.getElementById('totalWithdrawal').textContent = `₺${totalWithdrawal.toFixed(2)}`;
            document.getElementById('gamesPlayed').textContent = gamesPlayed;
        }

        function showNotification(message, type = 'info') {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.className = `notification ${type}`;
            notification.classList.add('show');

            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }

        function updateDebug(message) {
            const debugContent = document.getElementById('debugContent');
            const timestamp = new Date().toLocaleTimeString();
            const currentContent = debugContent.textContent;
            
            // Keep last 10 messages
            const lines = currentContent.split('\n');
            if (lines.length > 10) {
                lines.shift();
            }
            
            lines.push(`[${timestamp}] ${message}`);
            debugContent.textContent = lines.join('\n');
            
            // Scroll to bottom
            debugContent.scrollTop = debugContent.scrollHeight;
            
            console.log(`[Tracker Debug] ${message}`);
        }

        // ==========================================
        // KEYBOARD SHORTCUTS
        // ==========================================
        document.addEventListener('keydown', function(e) {
            // Alt + D = Quick Deposit
            if (e.altKey && e.key === 'd') {
                e.preventDefault();
                if (isLoggedIn) {
                    document.getElementById('depositAmount').value = 100;
                    handleDeposit();
                }
            }

            // Alt + W = Quick Withdrawal
            if (e.altKey && e.key === 'w') {
                e.preventDefault();
                if (isLoggedIn) {
                    document.getElementById('withdrawAmount').value = 50;
                    handleWithdrawal();
                }
            }

            // Alt + L = Logout
            if (e.altKey && e.key === 'l') {
                e.preventDefault();
                if (isLoggedIn) handleLogout();
            }

            // Escape = Close Modal
            if (e.key === 'Escape') {
                closeGameModal();
            }
        });

        // ==========================================
        // TRACKER STATUS CHECK
        // ==========================================
        setInterval(() => {
            if (window.tracker || window.TrackLib) {
                const tracker = window.tracker || window.TrackLib;
                if (tracker.getStatus) {
                    const status = tracker.getStatus();
                    console.log('Tracker Status:', status);
                }
            }
        }, 30000); // Every 30 seconds
    </script>
</body>
</html>
